<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Path Blocker (AI Edition)</title>
    <link rel="stylesheet" href="popup.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <style>
        /* Style for the new settings link */
        #settingsLink {
            position: absolute;
            top: 22px;
            right: 22px;
            color: #606770;
            font-size: 18px;
            text-decoration: none;
            transition: color 0.2s;
        }
        #settingsLink:hover {
            color: #007aff;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-shield-halved"></i> Path Blocker</h1>
            <a href="setting.html" target="_blank" title="打开设置" id="settingsLink"><i class="fas fa-cog"></i></a>
        </header>

        <div class="content-wrapper">
            <section class="mode-section">
                <div class="mode-switcher">
                    <button class="mode-btn" id="modeHardcore" data-mode="hardcore" title="仅启用永久锁定列表"><i class="fas fa-lock"></i> 硬核</button>
                    <button class="mode-btn" id="modeHybrid" data-mode="hybrid" title="优先永久锁定，再由AI守护"><i class="fas fa-wand-magic-sparkles"></i> 混合</button>
                    <button class="mode-btn" id="modeAi" data-mode="ai" title="仅由AI根据意图守护"><i class="fas fa-brain"></i> AI</button>
                </div>

                <div class="ai-control-area">
                    <div class="ai-input-group">
                        <i class="fas fa-bullseye"></i>
                        <input type="text" id="aiIntentInput" placeholder="设定当前意图 (如: 学习)">
                    </div>
                    <button id="setIntentBtn" title="设定AI意图">设定</button>
                </div>

                </section>

            <section class="add-section">
                <button id="addCurrentPageBtn" class="quick-add-btn">
                    <i class="fas fa-crosshairs"></i> 一键锁定当前页
                </button>
                
                <div class="input-grid">
                    <input type="text" id="nameInput" placeholder="规则名称">
                    <input type="text" id="pathInput" placeholder="URL 路径">
                    <select id="groupSelect"></select>
                </div>
                <button id="addBtn">
                    <i class="fas fa-plus-circle"></i> 永久锁定
                </button>
                <p class="note">
                    <i class="fas fa-exclamation-triangle"></i> 警告：硬核规则一旦添加，将无法删除。
                </p>
            </section>

            <section class="list-section">
                <h2><i class="fas fa-list-ul"></i> 已锁定列表</h2>
                <div id="groupsContainer"></div>
            </section>
        </div>
    </div>
    <script src="popup.js"></script>
</body>
</html>